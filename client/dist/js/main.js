/* Zepto v1.1.4 - zepto event ajax form ie - zeptojs.com/license */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */

var Zepto=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function G(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return e?typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}):t=[],t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=$(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,r){var i;return typeof n!="string"||1 in arguments?this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))}):!this.length||this[0].nodeType!==1?e:!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(e,t){return e=A[e]||e,1 in arguments?this.each(function(n){this[e]=$(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var r="data-"+t.replace(v,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return i!==null?Q(i):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=$(this,e,t,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[C(e)]||s.getPropertyValue(e);if(O(e)){var o={};return n.each(O(e)?e:[e],function(e,t){o[t]=i.style[C(t)]||s.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,a){s=r?a:a.parentNode,a=t==0?a.nextSibling:t==1?a.firstChild:t==2?a:null;var f=n.contains(u.documentElement,s);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();s.insertBefore(e,a),f&&G(e,function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var o=2 in arguments&&r.call(arguments,2);if(i(t)){var u=function(){return t.apply(n,o?o.concat(r.call(arguments)):arguments)};return u._zid=c(t),u}if(s(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);hasPlaceholder&&(dataType="jsonp");if(settings.cache===!1||(!options||options.cache!==!0)&&("script"==dataType||"jsonp"==dataType))settings.url=appendQuery(settings.url,"_="+Date.now());if("jsonp"==dataType)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t=[],n;return e([].slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return e.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),define("zepto",function(e){return function(){var t,n;return t||e.$}}(this)),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","zepto","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/app.html",[],function(){return'<nav class="bar bar-tab">\n  <a class="tab-item active" href="#" ident="home">\n    <span class="icon icon_list"></span>\n  </a>\n  <a class="tab-item" href="#">\n    <span class="icon"></span>\n  </a>\n  <a class="tab-item" href="#" ident="setting">\n    <span class="icon icon_personal"></span>\n  </a>\n</nav>\n\n\n  <div class="icon icon_add"></div>\n\n\n<div class="menus">\n  <div class="item want type_1">想吃</div>\n  <div class="item give type_2">请客</div>\n  <div class="item together type_3">拼菜</div>\n</div>\n</div>'}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("spin",t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}if(r[n]!==undefined)return n}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function c(e,t){return typeof e=="string"?e:e[t%e.length]}function p(e){this.opts=f(e||{},p.defaults,h)}function d(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function h(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)h(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)h(l);return i(t,f)},p.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};p.defaults={},f(p.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width;a(s,{left:i.left,top:i.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var u=0,f=(i.lines-1)*(1-i.direction)/2,l,c=i.fps,h=c/i.speed,p=(1-i.opacity)/(h*i.trail/100),d=h/i.lines;(function v(){u++;for(var e=0;e<i.lines;e++)l=Math.max(1-(u+(i.lines-e)*d)%h*p,i.opacity),t.opacity(s,e*i.direction+f,l,i);t.timeout=t.el&&setTimeout(v,~~(1e3/c))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(c(t.color,s),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var v=a(r("group"),{behavior:"url(#default#VML)"});return!u(v,"transform")&&v.adj?d():n=u(v,"animation"),p}),define("utils/util",["underscore","spin"],function(e,t){var n={startSpinning:function(e){var n=document.getElementById(e),r=(new t({color:"#aaaaaa"})).spin(n);return r},stopSpinning:function(e){e.stop()},api:function(e){return"http://42.62.52.155:3000/api/"+e}};return n}),define("utils/pt",["zepto"],function(e){var t=["webkit","moz","MS","o",""],n=!1,r=!1,i=!1,s={prefixedEvent:function(e,n,r){var i;for(var s=0;s<t.length;s++)t[s]||(n=n.toLowerCase()),e.addEventListener(t[s]+n,r,!1)},eventName:function(){var e,t=document.createElement("fakeelement"),n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};for(e in n)if(t.style[e]!==undefined)return n[e]},push:function(t,r){if(n)return!1;r||(r="slide");var i=t;i.animation=r;var s=Pages[Pages.length-1],o=s.$el;o.data("originalClassList",o.attr("class")),e("#pt-main").append(t.render().el);var u=t.$el;u.addClass("pt-page"),u.data("originalClassList",u.attr("class")),u.addClass("pt-page-current"),n=!0;var a="",f="";switch(r){case"slide":a="pt-page-scaleDown",f="pt-page-moveFromRight pt-page-ontop";break;case"slide_v":a="pt-page-fade",f="pt-page-moveFromBottom pt-page-ontop"}this.transition(o,u,a,f,function(){Pages.push(i)})},pop:function(){var e=Pages[Pages.length-1],t=e.$el,n=Pages[Pages.length-2],r=n.$el;t.data("originalClassList",t.attr("class")),r.data("originalClassList",r.attr("class")),r.addClass("pt-page-current");var i="",s="";switch(e.animation){case"slide":i="pt-page-moveToRight pt-page-ontop",s="pt-page-scaleUp";break;case"slide_v":i="pt-page-moveToBottomEasing pt-page-ontop",s="pt-page-moveFromTop"}this.transition(t,r,i,s,function(){e.remove(),Pages.pop()})},popToRoot:function(){var e=Pages[Pages.length-1],t=e.$el,n=Pages[1],r=n.$el;t.data("originalClassList",t.attr("class")),r.data("originalClassList",r.attr("class")),r.addClass("pt-page-current");var i="",s="";switch(e.animation){case"slide":i="pt-page-moveToRight pt-page-ontop",s="pt-page-scaleUp";break;case"slide_v":i="pt-page-moveToBottomEasing pt-page-ontop",s="pt-page-moveFromTop"}this.transition(t,r,i,s,function(){var e=Pages.length;for(var t=2;t<e;t++)Pages[t].remove();Pages.splice(2,e-2)})},transition:function(e,t,n,s,o){var u=this.eventName(),a=this;if(n===""||s===""){this.onEndAnimation(e,t,o);return}u&&(e.addClass(n).on(u,function(){e.off(u),r=!0,i&&a.onEndAnimation(e,t,o)}),t.addClass(s).on(u,function(){t.off(u),i=!0,r&&a.onEndAnimation(e,t,o)}))},onEndAnimation:function(e,t,s){r=!1,i=!1,this.reset(e,t,s),n=!1},reset:function(e,t,n){e.attr("class",e.data("originalClassList")),t.attr("class",t.data("originalClassList")+" pt-page-current"),e.removeClass("pt-page-current"),n&&n()}};return s}),define("text!templates/home.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon pull-left bar_title">今日菜单</a>\n  <a class="icon icon_menu pull-right"></a>\n  <!-- <h1 class="title">Title</h1> -->\n</header>\n\n<ul class="page-content event" style="overflow: auto;padding-top: 44px !important;margin-top:0;padding-left: 0;">\n\n</ui>'}),define("models/event",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{f_date:"",f_people_count:"",f_type:"",f_create_time:"",f_desc:""},format:function(){var e=new Date(this.get("date")*1),t=new Date(this.get("createtime")*1);this.set("f_date",this.numberFormat(e.getMonth()+1)+"/"+this.numberFormat(e.getDate()));var n=(new Date).getTime();(n-t)/864e5<1?this.set("f_create_time",this.numberFormat(t.getHours()+1)+":"+this.numberFormat(t.getMinutes())+"发布"):this.set("f_create_time",this.numberFormat(t.getMonth()+1)+"月"+this.numberFormat(t.getDate())+"日 "+this.numberFormat(t.getHours()+1)+":"+this.numberFormat(t.getHours())+"发布");var r=this.get("type");return r==window.Type.GIVE?(this.set("f_type","蹭饭"),this.set("f_desc","厨神"+this.get("name")+"喊你来蹭饭！")):r==window.Type.TOGETHER?(this.set("f_type","拼菜"),this.set("f_desc","小伙伴们，拼起来吧！")):r==window.Type.WANT&&(this.set("f_type","想吃"),this.set("f_desc","好心的厨神帮忙做吧！")),r==window.Type.GIVE&&this.set("f_people_count","邀"+this.get("limit")+"人"),this},numberFormat:function(e){return e<10?"0"+e:e}});return n}),define("collections/events",["underscore","backbone","models/event","utils/util"],function(e,t,n,r){var i=t.Collection.extend({model:n,url:r.api("status_list"),parse:function(e){return e.result}});return i}),define("text!templates/event_item.html",[],function(){return'<div class="food-image" style="background: url(<%=pic%>) center center no-repeat">\n    <div class="overlay-alpha"></div>\n    <div class="overlay">\n      <div class="left">\n        <div class="food"><%= foodname%></div>\n        <div class="date"><span><%= f_date%></span>&nbsp;<span><%= f_people_count%></span></div>\n        <div class="name"><%= name%></div>\n        <div class="desc"><%= f_desc%></div>\n        <div class="create_time"><%= f_create_time%></div>\n      </div>\n      <div class="right">\n        <div class="comment"><div class="icon"></div><div class="text"><%= comment_total%></div></div>\n        <div class="love"><div class="icon"></div><div class="text"><%= assist_total%></div></div>\n        <div class="type type<%= type%>"><%= f_type%></div>\n      </div>\n    </div>\n  </div>'}),define("text!templates/event_detail.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon icon-left-nav pull-left"></a>\n  <h1 class="title"><%=f_type%></h1>\n</header>\n\n<div class="page-content">\n  <div class="event-detail-image" style="background: url(<%=pic%>) center center no-repeat">\n    <div class="overlay-alpha"></div>\n    <div class="overlay">\n      <div class="left">\n        <div class="name"><%= name%></div>\n        <div class="desc"><%= f_desc%></div>\n        <div class="create_time"><%= f_create_time%></div>\n      </div>\n      <div class="right">\n        <div class="comment"><div class="icon"></div><div class="text"><%= comment_total%></div></div>\n        <div class="love"><div class="icon loveme"></div><div class="text"><%= assist_total%></div></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="event-detail-food">\n    <div class="food"><%= foodname%></div>\n    <div class="date"><span><%= f_date%></span>&nbsp;<span><%= f_people_count%></span>&nbsp;</div>\n    <div class="followers"></div>\n    <button class="btn btn-outlined action-btn" id="action-btn">Button</button>\n  </div>\n\n  <div class="event-detail-split"></div>\n\n  <div class="event-detail-comment">\n    <div class="icon"></div>\n    <ul class="table-view items">\n\n    </ui>\n  </div>\n</div>'}),define("models/comment",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{},format:function(){var e=new Date(this.get("createtime")*1);return this.set("f_date",this.numberFormat(e.getMonth()+1)+"-"+this.numberFormat(e.getDate())+" "+this.numberFormat(e.getHours())+":"+this.numberFormat(e.getMinutes())),this.get("reply_name")?this.set("f_text","回复 "+this.get("reply_name")+": "+this.get("text")):this.set("f_text",this.get("text")),this},numberFormat:function(e){return e<10?"0"+e:e}});return n}),define("collections/comments",["underscore","backbone","models/comment"],function(e,t,n){var r=t.Collection.extend({model:n,url:"js/data/comments.json"});return r}),define("text!templates/comment_item.html",[],function(){return'<a class="navigate">\n	<div class="name"><%=name%></div>\n	<div class="desc"><%=f_text%></div>\n	<div class="date"><%=f_date%></div>\n<a>'}),define("views/comment_item",["zepto","underscore","backbone","text!templates/comment_item.html","utils/pt","models/comment"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"li",template:t.template(r),events:{},initialize:function(e){this.model=new s(e),this.render()},render:function(){return this.model=this.model.format(),this.$el.addClass("table-view-cell"),this.$el.attr("fname",this.model.get("name")),this.$el.attr("fid",this.model.get("comment_id")),this.$el.html(this.template(this.model.toJSON())),this}});return o}),define("text!templates/publish.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon icon-left-nav pull-left"></a>\n  <h1 class="title"></h1>\n</header>\n\n<div class="page-content">\n	<div class="publish">\n		<form method="POST" id="publish_form">\n		<div class="foodname">\n			<input type="text" placeholder="菜名" name="foodname"/>\n		</div>\n		\n		<div class="people_count" style="display:none;">\n			<input type="number" placeholder="人数" name="limit" id="publish_limit"/>\n		</div>\n		<div class="date">\n			<input type="datetime-local" placeholder="时间" name="time" id="publish_time"/>\n		</div>\n\n		<input type="hidden" name="date" id="publish_date"/>\n		<input type="hidden" name="type" id="publish_type"/>\n		<input type="hidden" name="name" id="publish_user"/>\n		<input type="hidden" name="pic" id="publish_pic"/>\n\n		<div class="gellary">\n			<canvas id="publish_canvas" class="plus pic" style="display:none;margin-right:1em;"></canvas>\n			<div class="plus" >\n				<div class="icon" id="publish_addicon">\n					<!-- <input type="file" capture="camera" accept="image/*" id="takePicture"> -->\n					<input type="file" id="publish_capture" name="pic" accept="image/*">\n				</div>\n			</div>\n		</div>\n		</form>\n		<button class="btn btn-positive pbtn">发布</button>\n	</div>\n\n</div>'}),define("text!templates/alert.html",[],function(){return'<div class="a_modal"></div>\n\n<div class="alert_dialog">\n	<div class="message">\n		<%= message%>\n	</div>\n	<div class="alert_confirm">\n		确定	\n	</div>\n</div>\n'}),define("utils/alert",["zepto","underscore","backbone","text!templates/alert.html"],function(e,t,n,r){var i=n.View.extend({template:t.template(r),events:{"click .alert_confirm":"confirm"},initialize:function(e){this.message=e.message,this.callback=e.callback,this.render()},render:function(){e(this.el).html(this.template({message:this.message})),e("body").append(e(this.el))},confirm:function(){this.callback&&this.callback(),this.remove()}});return i}),define("views/publish",["zepto","underscore","backbone","utils/util","utils/pt","text!templates/publish.html","utils/alert"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(s),events:{"click .bar-nav .icon-left-nav":"back","click .pbtn":"publish"},initialize:function(e){this.type=e.type,this.food=e.food},render:function(){this.$el.html(this.template({})),this.type==window.Type.GIVE?(this.$el.find(".bar-nav .title").html("我要请客"),this.$el.find(".people_count").show()):this.type==window.Type.WANT?this.$el.find(".bar-nav .title").html("聘请厨神"):this.type==window.Type.TOGETHER&&(this.$el.find(".bar-nav .title").html("快来拼菜"),this.$el.find(".people_count").show());var e=this.$el.find("#publish_capture");e.on("change",t.bind(this.takeCallback,this));var n=this;return setTimeout(function(){n.food&&(n.$el.find(".foodname input").val(n.food.name),n.loadImage(n.food.pic))},200),this},back:function(){i.pop()},takeCallback:function(){var e=r.startSpinning("publish_addicon"),t=document.getElementById("publish_capture"),n=t.files[0],i=new FileReader;i.onload=function(t){var n=t.target.result,i=document.getElementById("publish_canvas"),s=i.getContext("2d"),o=new Image;i.style.cssText+="display:block",o.onload=function(){i.width=o.width,i.height=o.height,s.drawImage(o,0,0),r.stopSpinning(e)},o.src=n},i.readAsDataURL(n)},loadImage:function(e){var t=document.getElementById("publish_canvas"),n=t.getContext("2d"),r=new Image;t.style.cssText+="display:block",r.onload=function(){t.width=r.width,t.height=r.height,n.drawImage(r,0,0)},r.src=e},publish:function(){this.type==1&&e("#publish_limit").val(1);if(!e("#publish_time").val()){alert("请输入时间");return}var t=new Date(e("#publish_time").val());e("#publish_date").val(t.getTime()),e("#publish_type").val(this.type),e("#publish_user").val(window.User.name),e("#publish_capture").val()||this.food&&this.food.pic&&e("#publish_pic").val(this.food.pic);var n=r.startSpinning("body"),s=new FormData(e("#publish_form")[0]);e.ajax({url:r.api("release_status"),type:"POST",success:function(e){console.log(e),r.stopSpinning(n),new o({message:"发布成功",callback:function(){i.popToRoot(),window.eventCollection.trigger("refresh")}})},error:function(e,t,i){r.stopSpinning(n),alert(i)},data:s,cache:!1,contentType:!1,processData:!1})}});return u}),define("text!templates/field_dialog.html",[],function(){return'<div class="a_modal"></div>\n\n<div class="alert_dialog">\n	<div class="message">\n		<input type="text" placeholder="<%=placeholder%>" style="margin-bottom:0"/>\n	</div>\n	<div class="alert_confirm" style="margin-top:0.5em !important;">\n		确定	\n	</div>\n</div>\n'}),define("utils/field_dialog",["zepto","underscore","backbone","text!templates/field_dialog.html"],function(e,t,n,r){var i=n.View.extend({template:t.template(r),events:{"click .alert_confirm":"confirm","click .a_modal":"hide"},initialize:function(e){this.placeholder=e.placeholder,this.callback=e.callback,this.render()},render:function(){e(this.el).html(this.template({placeholder:this.placeholder})),e("body").append(e(this.el))},confirm:function(){this.callback&&this.callback(e(".alert_dialog input").val()),this.remove()},hide:function(){this.remove()}});return i}),define("views/event_detail",["zepto","underscore","backbone","text!templates/event_detail.html","utils/pt","utils/util","collections/comments","views/comment_item","views/publish","utils/field_dialog"],function(e,t,n,r,i,s,o,u,a,f){var l=n.View.extend({template:t.template(r),events:{"click .bar-nav .icon-left-nav":"back","click .action-btn":"action","click .love .loveme":"assist","click .comment .icon":"comment","click li":"reply"},initialize:function(e){this.model=e.model},render:function(){this.$el.html(this.template(this.model.toJSON()));var e=this.model.get("type"),n=this.$el.find(".action-btn");e==window.Type.GIVE?n.html("我来尝尝"):e==window.Type.TOGETHER?n.html("我来拼菜"):e==window.Type.WANT&&n.html("应聘厨师"),this.model.get("follow_total")>=parseInt(this.model.get("limit"))&&this.$el.find("#action-btn").attr("disabled",!0);var r=this.model.get("follows");for(var i=0;i<r.length;i++)if(r[i].name==window.User.name){this.$el.find("#action-btn").attr("disabled",!0);break}var s=this;t.each(this.model.get("comments"),function(e){var t=new u(e);s.$el.find(".table-view.items").append(t.$el)}),t.each(this.model.get("follows"),function(e){s.$el.find(".event-detail-food .followers").append("<div class='people'>"+e.name+"</div")}),this.assists=this.model.get("assists");for(var i=0;i<this.assists.length;i++)if(this.assists[i].name==window.User.name){var o=s.$el.find(".event-detail-image .loveme");o.removeClass("icon"),o.addClass("icon_h"),this.$el.find("#action-btn").attr("disabled",!0);break}return this.model.get("name")==window.User.name&&this.$el.find("#action-btn").attr("disabled",!0),this},back:function(){i.pop()},action:function(){if(this.model.get("follow_total")>=parseInt(this.model.get("limit")))return;var t=this.model.get("follows");for(var n=0;n<t.length;n++)if(t[n].name==window.User.name)return;var r=this.model.get("type"),o=this;if(r!==window.Type.TOGETHER){var u={status_id:this.model.get("_id"),name:window.User.name};e.ajax({type:"POST",url:s.api("follow"),dataType:"json",data:u,success:function(e){e.err===null?(o.model.set("follow_total",parseInt(o.model.get("follow_total"))+1),o.$el.find("#action-btn").attr("disabled",!0),o.$el.find(".event-detail-food .followers").append("<div class='people'>"+window.User.name+"</div"),o.autoComment(),o.model.get("follow_total")>=parseInt(o.model.get("limit"))&&o.$el.find("#action-btn").attr("disabled",!0)):alert(e.err)}})}else{var f=new a({type:window.Type.TOGETHER});i.push(f)}},autoComment:function(){var e;this.model.get("type")==window.Type.WANT?e=window.User.name+" 应聘了厨神了哦～":this.model.get("type")==window.Type.GIVE?e=window.User.name+" 要过来尝尝哦～":this.model.get("type")==window.Type.TOGETHER&&(e=window.User.name+" 要来拼菜了哦～"),this.commitComment(e)},assist:function(){var t=1,n=-1;for(var r=0;r<this.assists.length;r++)if(this.assists[r].name==window.User.name){t=-1,n=r;break}var i=this;e.ajax({type:"POST",url:s.api("assist"),dataType:"json",data:{name:window.User.name,num:t,status_id:this.model.get("_id")},success:function(e){var r=i.$el.find(".event-detail-image .love .text"),s=i.$el.find(".event-detail-image .loveme");t==1?(r.html(r.html()*1+1),s.removeClass("icon"),s.addClass("icon_h"),i.assists.push({name:window.User.name})):(r.html(r.html()*1-1),s.removeClass("icon_h"),s.addClass("icon"),i.assists.splice(n,1))}})},comment:function(e){var t="";e!==!0?(this.replyTo=null,this.replyId=null,t="请输入回复内容"):t="回复 "+this.replyTo+":";var n=this;new f({placeholder:t,callback:function(e){e&&n.commitComment(e)}})},reply:function(t){var n=t.target;n.tagName.toLowerCase()!="li"&&(n=e(n).parents(".table-view-cell")),this.replyTo=e(n).attr("fname"),this.replyId=e(n).attr("fid"),this.comment(!0)},fetchSucc:function(e,t,n){s.stopSpinning(this.spinner)},fetchError:function(e,t,n){s.stopSpinning(this.spinner)},commitComment:function(t){var n=this,r={status_id:this.model.get("_id"),name:window.User.name,text:t};this.replyId&&(r.comment_id=this.replyId),this.replyTo&&(r.reply_name=this.replyTo),e.ajax({type:"POST",url:s.api("comment"),dataType:"json",data:r,success:function(r){n.replyTo&&(t="回复 <span style='color:30c1be;'>"+n.replyTo+"</span>: "+t);var i=new u({text:t,name:window.User.name,createtime:(new Date).getTime()});n.model.get("follows").length==0?(console.log(n.$el.find(".table-view")),n.$el.find(".table-view").append(i.render().el)):e(i.render().el).insertBefore(n.$el.find(".event-detail-comment .table-view-cell"));var s=n.model.get("follows");s.push({name:window.User.name}),n.model.set("follows",s);var o=n.$el.find(".event-detail-image .comment .text");o.html(o.html()*1+1)}})}});return l}),define("views/event_item",["zepto","underscore","backbone","text!templates/event_item.html","utils/pt","views/event_detail"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"li",template:t.template(r),events:{"click .food-image":"onItemClick"},initialize:function(e){this.model=e,this.render()},render:function(){return this.model=this.model.format(),this.$el.html(this.template(this.model.toJSON())),this},onItemClick:function(){var e=new s({model:this.model});i.push(e)}});return o}),define("text!templates/menu.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon icon-left-nav pull-left"></a>\n  <h1 class="title">菜谱</h1>\n</header>\n\n<div class="wrapper-content">\n	<ul class="grid-view">\n\n	</ui>\n</div>\n'}),define("models/menu",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{},format:function(){return this}});return n}),define("collections/menus",["underscore","backbone","models/menu"],function(e,t,n){var r=t.Collection.extend({model:n,url:"js/data/menus.json"});return r}),define("text!templates/menu_item.html",[],function(){return'<div class="image" style="background: url(<%=image%>) center center no-repeat">\n	<div class="overlay-mask"></div>\n	<div class="overlay">\n		<div class="text"><%=name%></div>\n	</div>\n</div>'}),define("text!templates/menu_detail.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon icon-left-nav pull-left"></a>\n  <h1 class="title">菜谱详情</h1>\n</header>\n\n<div class="page-content">\n  <div class="menu-detail-image" style="background: url(<%=image%>) center center no-repeat">\n    <div class="right">\n      <div class="want">想吃</div>\n      <div class="give">请客</div>\n    </div>\n  </div>\n\n  <div class="menu-detail-food">\n    <div class="food"><%= name%></div>\n  </div>\n\n  <div class="light-split"></div>\n\n  <div class="menu-detail-staff">\n    <div style="font-size:0.8em;">用料</div>\n    <div class="desc"><%= main%></div>\n  </div>\n\n  <div class="light-split"></div>\n\n  <div class="menu-detail-usage">\n    <div style="font-size:0.8em;">做法</div>\n    <div class="desc"><%= method%></div>\n   </div>\n\n</div>'}),define("views/menu_detail",["zepto","underscore","backbone","text!templates/menu_detail.html","utils/pt","utils/util","views/publish"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(r),events:{"click .bar-nav .icon-left-nav":"back","click .menu-detail-image .want":"publish","click .menu-detail-image .give":"publish"},initialize:function(e){this.model=e.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},back:function(){i.pop()},publish:function(t){var n=e(t.target),r;e(n).hasClass("want")?r=window.Type.WANT:e(n).hasClass("give")&&(r=window.Type.GIVE),r&&i.push(new o({type:r,food:{pic:this.model.get("image"),name:this.model.get("name")}}))}});return u}),define("views/menu_item",["zepto","underscore","backbone","text!templates/menu_item.html","utils/pt","views/menu_detail"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"li",template:t.template(r),events:{"click .image":"onItemClick"},initialize:function(e){this.model=e,this.render()},render:function(){this.$el.addClass("grid-view-cell menuitem"),this.model=this.model.format(),this.$el.html(this.template(this.model.toJSON()));var t=e(window).width()-4;return this.$el.css({width:t/2,height:t/2,"float":"left"}),this},onItemClick:function(){var e=new s({model:this.model});i.push(e)}});return o}),define("views/menu",["zepto","underscore","backbone","utils/util","utils/pt","text!templates/menu.html","collections/menus","views/menu_item"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({template:t.template(s),events:{"click .bar-nav .icon-left-nav":"back"},initialize:function(){this.collection=new o,this.listenTo(this.collection,"add",this.addOne)},render:function(){return this.$el.html(this.template({})),this.spinner=r.startSpinning("body"),this.collection.fetch({success:t.bind(this.fetchSucc,this),error:t.bind(this.fetchError,this)}),this},addOne:function(e){var t=new u(e);this.$el.find(".grid-view").append(t.$el)},fetchSucc:function(e,t,n){r.stopSpinning(this.spinner)},fetchError:function(e,t,n){r.stopSpinning(this.spinner)},back:function(){i.pop()}});return a}),define("views/home",["zepto","underscore","backbone","utils/util","utils/pt","text!templates/home.html","collections/events","views/event_item","views/menu"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({template:t.template(s),events:{"click .icon_menu":"onMenuClick"},initialize:function(){this.collection=new o,window.eventCollection=this.collection,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"refresh",this.refresh)},render:function(){return this.$el.addClass("page-home"),this.$el.html(this.template({})),this.$el.find(".event").height(e(window).height()-50),this.refresh(),this},refresh:function(){this.spinner=r.startSpinning("body"),this.collection.remove(this.collection.models),this.$el.find(".event").html(""),this.collection.fetch({type:"POST",success:t.bind(this.fetchSucc,this),error:t.bind(this.fetchError,this)})},addOne:function(e){var t=new u(e);this.$el.find(".event").append(t.$el)},fetchSucc:function(e,t,n){r.stopSpinning(this.spinner)},fetchError:function(e,t,n){r.stopSpinning(this.spinner)},show:function(){this.$el.show(),e(".bar-tab .icon-home").parent().addClass("active")},hide:function(){this.$el.hide(),e(".bar-tab .icon-home").parent().removeClass("active")},onMenuClick:function(){var e=new a;i.push(e,"slide_v")}});return f}),define("text!templates/setting.html",[],function(){return'<header class="bar bar-nav">\n  <a class="icon pull-left bar_title">个人中心</a>\n  <a class="icon icon_menu pull-right"></a>\n</header>\n\n\n<div class="page-content">\n\n	<div class="personal_name">\n	    <div class="name"></div>\n		<!-- <div class="ttitle">厨神</div> -->\n		<div class="icon-wrapper">\n			<div class="icon"></div>\n		</div>\n	</div>\n\n	<div class="personal_seg">\n		<div class="segmented-control">\n		  <a class="control-item active" href="#item_want">\n		    我是吃货\n		  </a>\n		  <a class="control-item" href="#item_give">\n		    我是厨神\n		  </a>\n		  <a class="control-item" href="#item_together">\n		    我的拼菜\n		  </a>\n		</div>\n		<div class="card" style="margin: 10px 0; border:none !important">\n\n		  <ul class="table-view control-item_want" style="display:block">\n        　　<li class="hide" style="margin-top: -20px;font-size:0.8em !important;">您还没有想吃记录！</li>\n		  </ul>\n		  <ul class="table-view control-item_give">\n            　<li class="hide" style="margin-top: -20px;font-size:0.8em !important;">您还没有请客记录！</li>  \n		  </ul>\n		  <ul class="table-view control-item_together">\n             <li class="hide" style="font-size:0.8em !important;">您还没有拼菜记录！</li>\n		  </ul>\n		</div>\n	</div>\n\n</div>\n'}),define("text!templates/history_item.html",[],function(){return'<div class="inner">\n  <div class="image" style="background: url(<%=pic%>) center center no-repeat"></div>  \n  <div class="center">\n  	<div class="title1"><%= foodname%></div>\n  	<div class="date"><%= f_date%><%= f_dec%></div>\n  </div>\n  <div class="right"><%= f_newdate%>发布</div>\n  <div class="clear"></div>\n</div>'}),define("models/history",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{},format:function(){var e=new Date(this.get("createtime")*1);this.set("f_date",this.numberFormat(e.getMonth()+1)+"/"+this.numberFormat(e.getDate()));var t=new Date(this.get("date")*1);this.set("f_newdate",this.numberFormat(t.getHours())+":"+this.numberFormat(t.getMinutes()));var n="";switch(this.get("type")){case window.Type.WANT:n="邀橱神";break;case window.Type.GIVE:n="我请客";break;case window.Type.TOGETHER:n="我拼菜"}return this.set("f_dec",n),this},numberFormat:function(e){return e<10?"0"+e:e}});return n}),define("views/history_item",["zepto","underscore","backbone","text!templates/history_item.html","utils/pt","models/history"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"li",template:t.template(r),events:{},initialize:function(e){this.model=new s(e.o),this.model=this.model.format(),this.render()},render:function(){return this.$el.addClass("table-view-cell"),this.$el.html(this.template(this.model.toJSON())),this}});return o}),define("views/setting",["zepto","underscore","backbone","utils/util","text!templates/setting.html","views/history_item","utils/pt","views/menu"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({template:t.template(i),events:{"click .pull-right":"show_menu","click .segmented-control .control-item":"changeTab"},initialize:function(){this.wants=[],this.gives=[],this.togethers=[]},render:function(){return this.$el.addClass("page-setting"),this.$el.html(this.template(window.User)),this.$el.find(".personal_name .name").html(window.User.name),this},refresh:function(){this.$el.find(".table-view").html("");var n=this,i=r.startSpinning("body");e.ajax({url:r.api("history"),type:"POST",dataType:"json",data:{name:window.User.name},success:function(o){r.stopSpinning(i);var u=o.result;u&&u.length>0?(t.each(u,function(e){var t,r=!1,i=!1,o=!1,u=e.follows;if(e.name==window.User.name)switch(parseInt(e.type)){case window.Type.GIVE:i=!0;break;case window.Type.WANT:r=!0;break;case window.Type.TOGETHER:o=!0}else switch(parseInt(e.type)){case window.Type.GIVE:for(var a=0;a<u.length;a++)if(u[a].name==window.User.name){r=!0;break}break;case window.Type.WANT:for(var a=0;a<u.length;a++)if(u[a].name==window.User.name){i=!0;break}break;case window.Type.TOGETHER:for(var a=0;a<u.length;a++)if(u[a].name==window.User.name){o=!0;break}}if(r)t=".control-item_want";else if(i)t=".control-item_give";else{if(!o)return;t=".control-item_together"}var f=new s({o:e});n.$el.find(t).append(f.render().el)}),this.$el.find(".table-view").forEach(function(t){t.children.length==1&&e(t.children[0]).show()})):e(".card .hide").show()},error:function(e,t,n){r.stopSpinning(i),alert(n)}})},show:function(){this.$el.show(),e(".bar-tab .icon-gear").parent().addClass("active"),this.refresh()},hide:function(){this.$el.hide(),e(".bar-tab .icon-gear").parent().removeClass("active")},show_menu:function(){var e=new u;o.push(e,"slide_v")},changeTab:function(t){var n=t.target.hash.replace("#","");e(".segmented-control .control-item").removeClass("active"),e(t.srcElement).addClass("active"),e(".card .table-view").hide();var r=".control-"+n;e(r).show()}});return a}),define("views/app",["zepto","underscore","backbone","text!templates/app.html","utils/util","utils/pt","views/home","views/setting","views/publish"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({template:t.template(r),events:{"click .icon_add":"showMenu","click .tab-item":"changeTab","click .menus":"hidenMenu","click .menus .item":"publish"},initialize:function(){return this.tabs=[],this},render:function(){this.$el.html(this.template({}));var e=new o,t=new u;return this.tabs.push({name:"home",view:e}),this.tabs.push({name:"setting",view:t}),this.currentTab=this.tabs[0],this.$el.append(e.render().$el),this.$el.append(t.render().$el),t.hide(),this},showMenu:function(){e(".menus").addClass("show");var t=e(".icon_add").offset(),n=t.left+(e(".icon_add").width()-e(".menus .want").width())/2;e(".menus .item.give").css({left:n,top:t.top}),e(".menus .item.want").css({left:n,top:t.top}),e(".menus .item.together").css({left:n,top:t.top}),e(".menus .item.want").addClass("bounceInUp_want menu_animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){}),e(".menus .item.give").addClass("bounceInUp_give menu_animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){}),e(".menus .item.together").addClass("bounceInUp_together menu_animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){})},hidenMenu:function(){e(".menus").addClass("fade").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e(".menus").removeClass("show");var t=e(".icon_add").offset();e(".menus .item.give").css({left:t.left,top:t.top}),e(".menus .item.want").css({left:t.left,top:t.top}),e(".menus .item.together").css({left:t.left,top:t.top}),e(".menus .item.want").removeClass("bounceInUp_want menu_animated"),e(".menus .item.give").removeClass("bounceInUp_give menu_animated"),e(".menus .item.together").removeClass("bounceInUp_together menu_animated"),e(".menus").removeClass("fade")})},changeTab:function(t){var n=t.target;if(e(n).hasClass("icon")||e(n).hasClass("tab-label"))n=n.parentNode;if(e(n).hasClass("tab-item")){var r=e(n).attr("ident");if(r!=this.currentTab.name)for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].name==r){this.currentTab.view.hide(),this.currentTab=this.tabs[i],this.currentTab.view.show();break}}},publish:function(t){var n=e(t.target),r;n.hasClass("want")?r=window.Type.WANT:n.hasClass("give")?r=window.Type.GIVE:n.hasClass("together")&&(r=window.Type.TOGETHER);var i=new a({type:r});s.push(i)}});return f}),define("routers/router",["zepto","backbone"],function(e,t){var n=t.Router.extend({routes:{},setFilter:function(e){}});return n}),define("text!templates/signin.html",[],function(){return'<!-- <h2  style="margin-bottom:.5em;">登录</h2> -->\n<div align="center"><img src="image/logo.png" style="width: 100px;heigth:100px;margin-top: 2em;"></div>\n<form class="input-group" style="margin-top: 20%;" id="signin_form">\n  <input type="text" name="name"  placeholder="姓名" style="height:50px !important;">\n  <input type="password" name="pwd"  placeholder="密码" style="height:50px !important; border-bottom-left-radius:5px;border-bottom-right-radius:5px">\n</form>\n\n <button class="btn btn-positive btn-block signin-btn" style="margin-top:2em; ">登录</button>\n\n <div class="signup-btn">免费注册</div>\n \n \n'}),define("text!templates/signup.html",[],function(){return'<div class="back">返回</div>\n<div align="center"><img src="image/logo.png" style="width: 100px;heigth:100px;margin-top: 1em;"></div>\n<form class="input-group" style="margin-top: 20%;" id="signup_form">\n  <input type="text" name="name" placeholder="姓名" style="height:50px !important;">\n  <input type="password" name="pwd" placeholder="密码" style="height:50px !important;border-bottom-left-radius:5px;border-bottom-right-radius:5px">\n</form>\n\n <button class="btn btn-positive btn-block register-btn" style="margin-top:2em;">注册</button>\n'}),define("views/signup",["zepto","underscore","backbone","utils/pt","text!templates/signup.html","views/app"],function(e,t,n,r,i,s){var o=n.View.extend({template:t.template(i),events:{"click .register-btn":"register","click .back":"back"},initialize:function(e){this.parentView=e.parentView},render:function(){return this.$el.html(this.template({})),this.$el.addClass("signin-padding"),this.$el.addClass("sign-background"),this},register:function(){var t=e("#signup_form").serialize(),n=this.$el.find(".input-group input")[0].value,i={name:n},o=this;e.ajax({type:"POST",url:"http://42.62.52.155:3000/api/register",dataType:"json",data:t,success:function(e){e.err===null?(localStorage.setItem("eat_user",JSON.stringify(i)),window.User=i,r.push(new s),setTimeout(function(){o.remove(),o.parentView.remove(),Pages.splice(1,2)},1e3)):alert(e.err)}})},back:function(){r.pop()}});return o}),define("views/signin",["zepto","underscore","backbone","utils/pt","text!templates/signin.html","views/signup","views/app"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(i),events:{"click .signup-btn":"signup","click .signin-btn":"signin"},initialize:function(){},render:function(){return this.$el.html(this.template({})),this.$el.addClass("signin-padding"),this.$el.addClass("sign-background"),this},signup:function(){r.push(new s({parentView:this}),"slide_v")},signin:function(){var t=e("#signin_form").serialize(),n=this.$el.find(".input-group input")[0].value,i={name:n},s=this;e.ajax({type:"POST",url:"http://42.62.52.155:3000/api/login",dataType:"json",data:t,success:function(e){e.err===null?(localStorage.setItem("eat_user",JSON.stringify(i)),window.User=i,r.push(new o),setTimeout(function(){s.remove(),Pages.splice(1,1)},1e3)):alert(e.err)}})}});return u}),require.config({paths:{zepto:"lib/zepto",underscore:"lib/underscore",backbone:"lib/backbone",text:"lib/text",spin:"lib/spin"},shim:{zepto:{exports:"$"}}}),window.Pages=[],window.User,window.Type={WANT:1,GIVE:2,TOGETHER:3},define("main",["views/app","routers/router","utils/pt","views/signin"],function(e,t,n,r){new t,Backbone.history.start();var i=new Backbone.View;i.$el.addClass("pt-page pt-page-current"),$("#pt-main").append(i.$el),Pages.push(i);var s=localStorage.getItem("eat_user");s?(window.User=JSON.parse(s),n.push(new e,"none")):n.push(new r,"none")});